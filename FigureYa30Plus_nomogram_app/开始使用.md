# 🎉 欢迎使用 Nomogram Calculator App v2.1

## ✨ 新功能亮点

您的应用现在支持：
- ✅ **CSV导出**: 每次录入的数据都能导出保存
- ✅ **历史记录**: 自动保存所有计算记录
- ✅ **批量导出**: 一键导出所有历史数据
- ✅ **完全离线**: 不访问网络，不上传数据
- ✅ **手机优化**: 可安装到手机主屏幕

## 🚀 快速开始

### 1️⃣ 启动应用（选择一种方式）

#### 方式A: Python（推荐）
```bash
cd /Users/mypro/Downloads/FigureYa/FigureYa30Plus_nomogram_app
python3 -m http.server 8000
```

#### 方式B: Node.js
```bash
cd /Users/mypro/Downloads/FigureYa/FigureYa30Plus_nomogram_app
npx serve -l 8000
```

### 2️⃣ 在电脑浏览器中访问

打开浏览器，访问: http://localhost:8000

### 3️⃣ 在手机上访问

1. 确保手机和电脑连接到**同一个WiFi**
2. 查找电脑IP地址：
   ```bash
   # Mac/Linux
   ifconfig | grep "inet " | grep -v 127.0.0.1
   
   # 或者在网络设置中查看
   ```
3. 在手机浏览器输入: `http://你的电脑IP:8000`
   - 例如: `http://192.168.1.100:8000`

### 4️⃣ 安装到手机主屏幕

**iPhone (Safari):**
1. 点击底部"分享"按钮 📤
2. 选择"添加到主屏幕"
3. 点击"添加"

**Android (Chrome):**
1. 点击右上角菜单 ⋮
2. 选择"添加到主屏幕"
3. 点击"安装"

## 📝 使用方法

### 基本使用流程

```
1. 输入患者数据
   ↓
2. 点击"计算生存率"
   ↓
3. 查看预测结果（自动保存）
   ↓
4. 点击"💾 导出当前记录"
   ↓
5. CSV文件下载到本地
```

### 批量使用流程

```
1. 连续录入多个患者
   ↓
2. 每次计算自动保存
   ↓
3. 点击"📥 导出所有历史记录"
   ↓
4. 获得包含所有数据的CSV文件
```

## 💾 CSV导出功能

### 三个导出按钮

| 按钮 | 功能 | 使用场景 |
|------|------|----------|
| 💾 导出当前记录 | 导出刚才计算的数据 | 单个患者记录 |
| 📥 导出所有历史记录 | 导出所有保存的数据 | 批量数据备份 |
| 🗑️ 清空历史 | 删除所有历史记录 | 释放存储空间 |

### CSV文件位置

- **iPhone**: "文件"应用 → "下载"文件夹
- **Android**: "文件管理器" → "Download"文件夹
- **电脑**: 浏览器默认下载文件夹

### 打开CSV文件

- Excel (推荐)
- Apple Numbers
- Google Sheets
- WPS表格
- LibreOffice Calc

## 🔒 隐私与安全

### 完全离线运行 ✅

```
您的数据流向:
输入 → 本地计算 → 本地存储 → 本地导出

✅ 不连接网络
✅ 不上传服务器
✅ 数据完全属于您
```

### 数据存储位置

- **存储**: 手机/电脑浏览器的本地存储
- **大小**: 每条记录约0.5KB，可存储上万条
- **安全**: 只有您的浏览器可以访问
- **备份**: 通过导出CSV文件备份

## 📚 详细文档

应用包含完整的中文文档：

1. **README.md** - 功能概述和技术说明
2. **使用指南.md** - 详细使用说明和常见问题
3. **本地部署指南.md** - 部署方法和故障排除
4. **更新说明_v2.1.md** - 版本更新详情
5. **测试清单.md** - 完整测试步骤

## 🎯 测试建议

### 快速测试（5分钟）

1. ✅ 输入数据并计算
2. ✅ 导出当前记录
3. ✅ 用Excel打开CSV
4. ✅ 验证中文显示正常

### 完整测试（15分钟）

1. ✅ 电脑浏览器测试
2. ✅ 手机浏览器测试
3. ✅ 安装PWA到主屏幕
4. ✅ 离线模式测试
5. ✅ 批量导出测试

详细测试步骤见 `测试清单.md`

## ❓ 常见问题

### Q1: 服务器启动失败？
**A**: 端口可能被占用，尝试其他端口：
```bash
python3 -m http.server 8080  # 使用8080端口
```

### Q2: 手机无法访问？
**A**: 检查：
- 手机和电脑是否在同一WiFi
- 电脑IP地址是否正确
- 防火墙是否阻止

### Q3: CSV中文乱码？
**A**: 应该不会，已添加BOM。如果遇到：
- 用Excel的"数据"→"获取数据"导入
- 选择UTF-8编码

### Q4: 历史记录不见了？
**A**: 可能原因：
- 清除了浏览器数据
- 使用了隐私/无痕模式
- 换了其他浏览器

### Q5: 可以在电脑上用吗？
**A**: 当然可以！所有功能都支持桌面浏览器。

## 📞 需要帮助？

如果遇到问题：

1. 查看详细文档（上面列出的5个文档）
2. 检查浏览器控制台是否有错误
3. 尝试清除缓存重新加载
4. 尝试其他浏览器

## 🎊 开始使用

现在就可以开始了！

```bash
# 1. 启动服务器
cd /Users/mypro/Downloads/FigureYa/FigureYa30Plus_nomogram_app
python3 -m http.server 8000

# 2. 打开浏览器
# 访问 http://localhost:8000

# 3. 输入数据，开始使用！
```

## 📊 应用特点总结

| 特点 | 说明 |
|------|------|
| 🎯 专业准确 | 基于Cox回归模型 |
| 📱 移动优化 | 专为手机设计 |
| 🔌 完全离线 | 无需网络连接 |
| 💾 数据导出 | CSV格式，通用兼容 |
| 🔒 隐私保护 | 数据不离开设备 |
| 🚀 安装便捷 | 一键安装到主屏幕 |
| 📚 文档完整 | 中文详细文档 |
| 🎨 界面美观 | 现代化设计 |

---

**版本**: v2.1.0  
**更新日期**: 2025-10-30  
**位置**: `/Users/mypro/Downloads/FigureYa/FigureYa30Plus_nomogram_app/`

🎉 **祝使用愉快！**

