# Nomogram Calculator App

🏥 **医生临床决策助手** - 基于Cox回归模型的患者生存率预测计算器

## 📱 功能特点

- ✅ **移动端优化**: 专为手机设计，响应式界面
- ✅ **离线可用**: PWA技术支持，可离线计算
- ✅ **实时计算**: 输入数据后立即获得生存率预测
- ✅ **多时间点**: 提供2年、5年、8年生存率预测
- ✅ **输入验证**: 智能验证输入数据的有效性
- ✅ **结果可视化**: 直观的百分比显示和风险评估

## 🚀 快速开始

### 在线使用
1. 在手机浏览器中打开应用
2. 输入患者的临床数据
3. 点击"计算生存率"按钮
4. 查看预测结果

### 本地部署
```bash
# 克隆或下载项目
cd nomogram-app

# 使用任何HTTP服务器启动
python3 -m http.server 8000
# 或使用Node.js
npx serve .

# 在浏览器中访问
open http://localhost:8000
```

## 📋 输入参数说明

| 参数 | 说明 | 正常范围 | 单位 |
|------|------|----------|------|
| 年龄 (Age) | 患者年龄 | 0-120 | 岁 |
| 性别 (Sex) | 患者性别 | 男性/女性 | - |
| 胆红素 (Bilirubin) | 血清胆红素水平 | 0-50 | mg/dL |
| 铜 (Copper) | 血清铜水平 | 0-1000 | μg/dL |
| 疾病分期 (Stage) | 临床疾病分期 | 1-4期 | - |
| 治疗方案 (Treatment) | 使用的治疗方案 | 对照组/治疗1/治疗2 | - |

## 📊 输出结果

- **2年生存率**: 2年后的预期生存概率
- **5年生存率**: 5年后的预期生存率
- **8年生存率**: 8年后的预期生存率

### 结果解释
- 🟢 **高概率** (>80%): 预后良好
- 🟡 **中等概率** (50-80%): 需要定期随访
- 🔴 **低概率** (<50%): 建议积极治疗

## 🔬 技术原理

### 模型基础
基于FigureYa30nomogram_update模块的Cox比例风险模型:

```
h(t) = h₀(t) × exp(β₁×age + β₂×bili + β₃×sex + β₄×copper + β₅×stage + β₆×trt)
```

### 模型系数
- age: 0.032175
- catbili_medium: 1.408395
- catbili_high: 1.811699
- sex_male: -0.258128
- copper: 0.003118
- stage: 0.543079
- trt: 0.110627

### 胆红素分类
- 低风险 (Low): ≤ 2 mg/dL
- 中风险 (Medium): 2-4 mg/dL
- 高风险 (High): > 4 mg/dL

## 🛠️ 技术栈

- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **PWA**: Service Worker, Web App Manifest
- **样式**: Responsive Design, Mobile-first
- **计算**: Cox回归算法实现
- **缓存**: Cache API, Background Sync

## 📱 PWA功能

- **离线支持**: 可在没有网络连接的情况下使用
- **安装到主屏幕**: 可添加到手机主屏幕
- **后台更新**: 自动缓存更新最新版本
- **快速启动**: 优化的加载速度

## ⚠️ 使用须知

1. **仅供参考**: 计算结果仅供临床参考，不能替代专业医疗判断
2. **数据质量**: 输入数据的准确性影响结果可靠性
3. **模型限制**: 基于特定数据集训练，可能不适用于所有人群
4. **定期更新**: 模型参数会定期更新，请使用最新版本

## 🔒 隐私保护

- ✅ **本地计算**: 所有计算均在设备本地进行
- ✅ **无数据上传**: 不会上传患者数据到服务器
- ✅ **无跟踪**: 不包含任何用户跟踪代码
- ✅ **离线使用**: 完全可以离线使用

## 📞 技术支持

如有问题或建议，请联系：
- 基于FigureYa项目开发
- 参考: FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency

## 📄 许可证

本项目基于Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License

---

**免责声明**: 本应用仅供学术研究和临床参考使用，使用本应用进行临床决策的风险由使用者自行承担。