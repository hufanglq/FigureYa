# Nomogram App v2.1 测试清单

## 🖥️ 桌面浏览器测试

### 基本功能测试
- [ ] 打开 http://localhost:8000
- [ ] 界面正常显示
- [ ] 输入测试数据：
  ```
  年龄: 50
  性别: 女性
  胆红素: 2.5
  铜: 100
  疾病分期: 2
  治疗方案: 对照组
  ```
- [ ] 点击"计算生存率"
- [ ] 结果正确显示（2年、5年、8年生存率）
- [ ] 历史计数显示"已保存 1 条记录"

### CSV导出测试
- [ ] 点击"💾 导出当前记录"
- [ ] CSV文件成功下载
- [ ] 文件名格式正确：`nomogram_记录_20251030_HHMMSS.csv`
- [ ] 用Excel打开CSV文件
- [ ] 中文显示正常（无乱码）
- [ ] 数据完整（所有字段都在）

### 批量测试
- [ ] 输入第2组数据并计算
  ```
  年龄: 65
  性别: 男性
  胆红素: 3.2
  铜: 150
  疾病分期: 3
  治疗方案: 治疗1
  ```
- [ ] 历史计数显示"已保存 2 条记录"
- [ ] 输入第3组数据并计算
- [ ] 历史计数显示"已保存 3 条记录"
- [ ] 点击"📥 导出所有历史记录"
- [ ] CSV文件包含3条记录
- [ ] 每条记录数据正确

### 清空测试
- [ ] 点击"🗑️ 清空历史"
- [ ] 弹出确认对话框
- [ ] 确认清空
- [ ] 历史计数显示"已保存 0 条记录"
- [ ] 点击"导出所有历史记录"显示"没有历史记录可导出"

### 离线测试
- [ ] 正常访问应用一次
- [ ] 打开浏览器开发者工具
- [ ] 切换到Network标签
- [ ] 勾选"Offline"选项（模拟离线）
- [ ] 刷新页面
- [ ] 应用仍可正常加载
- [ ] 可以进行计算
- [ ] 可以导出CSV
- [ ] 取消"Offline"选项

## 📱 手机浏览器测试

### 访问测试
- [ ] 电脑和手机连接到同一WiFi
- [ ] 获取电脑IP地址
- [ ] 手机浏览器访问 `http://电脑IP:8000`
- [ ] 应用正常加载
- [ ] 界面适配手机屏幕

### 功能测试
- [ ] 输入测试数据（所有字段）
- [ ] 点击计算按钮
- [ ] 结果正常显示
- [ ] 历史计数更新
- [ ] 点击导出当前记录
- [ ] CSV文件下载到手机

### PWA安装测试 (iPhone)
- [ ] 使用Safari浏览器打开
- [ ] 点击底部"分享"按钮
- [ ] 选择"添加到主屏幕"
- [ ] 设置应用名称
- [ ] 点击"添加"
- [ ] 主屏幕出现应用图标
- [ ] 点击图标启动应用
- [ ] 应用以全屏模式运行

### PWA安装测试 (Android)
- [ ] 使用Chrome浏览器打开
- [ ] 点击右上角菜单（三个点）
- [ ] 选择"添加到主屏幕"或"安装应用"
- [ ] 确认安装
- [ ] 主屏幕出现应用图标
- [ ] 点击图标启动应用
- [ ] 应用以独立模式运行

### 移动端离线测试
- [ ] 安装PWA应用
- [ ] 正常使用一次
- [ ] 开启手机飞行模式
- [ ] 启动应用
- [ ] 应用正常加载
- [ ] 可以计算
- [ ] 可以导出CSV
- [ ] 关闭飞行模式

### 触摸交互测试
- [ ] 所有按钮可以正常点击
- [ ] 输入框可以正常输入
- [ ] 下拉框可以正常选择
- [ ] 滚动流畅
- [ ] 缩放正常（如果允许）

### CSV查看测试 (iPhone)
- [ ] 导出CSV文件
- [ ] 打开"文件"应用
- [ ] 进入"下载"文件夹
- [ ] 找到导出的CSV文件
- [ ] 点击预览
- [ ] 或用Numbers应用打开
- [ ] 中文显示正常

### CSV查看测试 (Android)
- [ ] 导出CSV文件
- [ ] 打开"文件管理器"
- [ ] 进入"Download"文件夹
- [ ] 找到导出的CSV文件
- [ ] 用Excel或WPS打开
- [ ] 中文显示正常

## 🔄 Service Worker测试

### 缓存测试
- [ ] 打开开发者工具
- [ ] Application/Storage > Service Workers
- [ ] 确认Service Worker已注册
- [ ] 版本号为v2.1.0
- [ ] 查看Cache Storage
- [ ] 确认所有文件已缓存：
  - index.html
  - style.css
  - ios-enhancements.css
  - nomogram.js
  - app.js
  - nomogram-viz.js
  - csv-export.js ✨ (新增)
  - ios-enhancements.js
  - manifest.json
  - 所有图片文件

### 更新测试
- [ ] 修改一个文件（如添加注释）
- [ ] 刷新页面
- [ ] Service Worker自动更新
- [ ] 新版本激活

## 🐛 边界条件测试

### 数据验证
- [ ] 输入超出范围的年龄（如-1或200）
- [ ] 应显示验证错误
- [ ] 输入超出范围的胆红素
- [ ] 应显示验证错误
- [ ] 留空必填字段提交
- [ ] 应显示验证错误

### 存储限制
- [ ] 连续添加100条记录
- [ ] 导出所有记录
- [ ] CSV文件包含所有100条
- [ ] 文件大小约50KB
- [ ] Excel可以打开

### 特殊字符
- [ ] 在记录中包含各种数据
- [ ] 导出CSV
- [ ] 所有数据正确导出
- [ ] 逗号正确处理

### 长时间运行
- [ ] 应用保持打开1小时
- [ ] 功能仍正常工作
- [ ] 历史记录完整
- [ ] 可以导出

## ✅ 通过标准

### 必须通过
- ✅ 基本计算功能正常
- ✅ CSV导出功能正常
- ✅ 历史记录保存正常
- ✅ 中文显示无乱码
- ✅ 离线模式可用
- ✅ 移动端正常使用

### 应该通过
- ✅ PWA可以安装
- ✅ 界面美观流畅
- ✅ 所有按钮有反馈
- ✅ 错误提示清晰

### 最好通过
- ✅ 加载速度快(<2秒)
- ✅ 导出速度快(<1秒)
- ✅ 无控制台错误
- ✅ 内存占用合理

## 📝 测试记录

### 测试环境
- 日期: ___________
- 测试人: ___________
- 电脑系统: ___________
- 浏览器: ___________
- 手机型号: ___________
- 手机系统: ___________

### 发现的问题
1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 测试结论
- [ ] 全部通过，可以发布
- [ ] 有小问题，可以发布
- [ ] 有严重问题，需要修复

### 备注
_________________________________________________
_________________________________________________
_________________________________________________

---

**测试版本**: v2.1.0  
**测试日期**: 2025-10-30

